apiVersion: apps/v1                # Deployment 使用的 API 版本
kind: Deployment                   # 資源類型為 Deployment
metadata:
  name: jamkao-app                 # Deployment 名稱
spec:
  replicas: 1                      # 副本數量為 1
  selector:
    matchLabels:
      app: jamkao-app              # 用於選擇 Pod 的標籤
  template:
    metadata:
      labels:
        app: jamkao-app            # Pod 的標籤，需與 selector 相符
    spec:
      containers:
        - name: jamkao-app         # 容器名稱
          image: jamkao-app:latest # 使用的映像檔名稱
          imagePullPolicy: Never   # 不從 registry 拉取映像，只用本地映像
          ports:
            - containerPort: 8080  # 容器內部開放的 port
          resources:
            limits:
              memory: "512Mi"      # 記憶體限制
              cpu: "500m"          # CPU 限制
            requests:
              memory: "256Mi"      # 記憶體請求
              cpu: "250m"          # CPU 請求

--- 
apiVersion: v1                     # Service 使用的 API 版本
kind: Service                      # 資源類型為 Service
metadata:
  name: jamkao-app-service         # Service 名稱
spec:
  type: NodePort                   # Service 類型為 NodePort（對外開放）
  selector:
    app: jamkao-app                # 連接到具有此標籤的 Pod
  ports:
    - port: 8080                   # Service 對外提供的 port
      targetPort: 8080             # Pod 內部實際接收流量的 port
      nodePort: 30000              # 節點對外開放的 port（可從外部訪問）